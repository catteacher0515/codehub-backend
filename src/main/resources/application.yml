server:
  port: 8125
  servlet:
    context-path: /api  # å»ºè®®åŠ ä¸Šç»Ÿä¸€å‰ç¼€ï¼Œè¿™æ ·æ‰€æœ‰æ¥å£éƒ½ä¼šå˜æˆ /api/xxxï¼Œæ–¹ä¾¿åŒºåˆ†

spring:
  application:
    name: codehub-next

  # =======================================================
  # 1. æ•°æ®åº“é…ç½® (PostgreSQL + PGVector)
  # æ³¨æ„ï¼šå¦‚æœä¸ä½¿ç”¨ RAG (å‘é‡æ£€ç´¢) åŠŸèƒ½ï¼Œè¿™éƒ¨åˆ†å¯ä»¥å…ˆæ³¨é‡Šæ‰
  # =======================================================
  #  datasource:
  #    driver-class-name: org.postgresql.Driver
  #    url: jdbc:postgresql://localhost:5432/codehub_vector
  #    username: postgres
  #    password: password

  # =======================================================
  # 2. Spring AI é…ç½® (æ ¸å¿ƒå¤§è„‘)
  # =======================================================
  ai:
    dashscope:
      api-key: ${CODEHUB_DASH_SCOPE_KEY} # è¯»å–ç¯å¢ƒå˜é‡ï¼Œå®‰å…¨ç¬¬ä¸€
      chat:
        options:
          model: qwen-plus # æ¨èä½¿ç”¨ qwen-plus æˆ– qwen-max
      # å¼€å¯ Embedding èƒ½åŠ›ï¼Œç”¨äº RAG
      embedding:
        enabled: true

    # -----------------------------------------------------
    # [æ–°å¢] MCP åè®®é…ç½® (ä¸‡èƒ½æ’æ§½)
    # -----------------------------------------------------
    mcp:
      client:
        enabled: true
#        stdio:
#          servers:
#            fs-server:
#              # ğŸ”´ æ ¸å¿ƒåŠ¨ä½œ 1ï¼šè·³è¿‡ cmd å’Œ npxï¼Œç›´æ¥åŠ¨ç”¨ node å¤§è„‘
#              command: "node"
#              args:
#                # ğŸ”´ æ ¸å¿ƒåŠ¨ä½œ 2ï¼šç›´æ¥æŒ‡å‘å·¥å…·çš„ dist/index.js
#                # å†æ¬¡æé†’ï¼šWindows è·¯å¾„åœ¨ YAML é‡Œå¿…é¡»åŒæ–œæ  \\
#                - "C:\\dev\\nodejs\\node_global\\node_modules\\@modelcontextprotocol\\server-filesystem\\dist\\index.js"
#
#                # ğŸ”´ æ ¸å¿ƒåŠ¨ä½œ 3ï¼šå·¥å…·æ‰€éœ€çš„å‚æ•°ï¼ˆå½“å‰ç›®å½•ï¼‰
#                - "."

    # -----------------------------------------------------
    # å‘é‡åº“é…ç½®
    # æ³¨æ„ï¼šæˆ‘ä»¬ä¹‹å‰çš„å®æˆ˜ç”¨çš„æ˜¯ SimpleVectorStore (å†…å­˜ç‰ˆ)ï¼Œ
    # å¦‚æœä½ æ²¡è£… PGVectorï¼Œä¸‹é¢è¿™æ®µå»ºè®®å…ˆæ³¨é‡Šæ‰ï¼Œå¦åˆ™å¯èƒ½ä¼šæŠ¥é”™è¿æ¥ä¸ä¸Šæ•°æ®åº“
    # -----------------------------------------------------
    vectorstore:
      pgvector:
        initialize-schema: true
        dimensions: 1536
        index-type: HNSW
        distance-type: COSINE_DISTANCE

  # =======================================================
  # 3. è¾…åŠ©åŠŸèƒ½é…ç½®
  # =======================================================
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8

# =======================================================
# 4. Knife4j æ¥å£æ–‡æ¡£é…ç½®
# =======================================================
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
  api-docs:
    path: /v3/api-docs
  group-configs:
    - group: 'default'
      paths-to-match: '/**'
      packages-to-scan: com.pingyu.codehub.backend.controller

knife4j:
  enable: true
  setting:
    language: zh_cn

# =======================================================
# 5. æ—¥å¿—é…ç½® (ä¾¦æ¢çš„æ”¾å¤§é•œ)
# =======================================================
logging:
  level:
    #    root: INFO                             # æ ¹çº§åˆ«ä¿æŒ INFOï¼Œé¿å…åˆ·å±
    #    com.pingyu.codehubbackend: DEBUG       # ä½ çš„é¡¹ç›®åŒ…åï¼Œå¼€å¯ DEBUG ä»¥è§‚å¯Ÿè‡ªå·±çš„ Bean
    org.springframework.ai: DEBUG          # é‡ç‚¹ï¼šå¼€å¯ Spring AI çš„è°ƒè¯•æ—¥å¿—ï¼Œè§‚å¯Ÿ Token å’Œå·¥å…·è°ƒç”¨
#    org.springframework.beans: DEBUG       # é‡ç‚¹ï¼šè§‚å¯Ÿ Bean çš„ä¾èµ–æ³¨å…¥å’Œåˆ›å»ºé¡ºåº
#    org.springframework.web: INFO